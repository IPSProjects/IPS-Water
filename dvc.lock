schema: '2.0'
stages:
  ASEMD_thermostat:
    cmd: zntrack run ipsuite.calculators.ase_md.LangevinThermostat --name ASEMD_thermostat
      --hash-only
    params:
      params.yaml:
        ASEMD_thermostat:
          friction: 0.01
          temperature: 300
          time_step: 0.5
      zntrack.json:
        ASEMD.thermostat:
          _type: zntrack.Node
          value:
            module: ipsuite.calculators.ase_md
            cls: LangevinThermostat
            name: ASEMD_thermostat
            remote:
            rev:
    outs:
    - path: nodes/ASEMD_thermostat/hash
      md5: 7777dee660f2019b0460479377f60a67
      size: 36
  SmilesToAtoms:
    cmd: zntrack run ipsuite.configuration_generation.smiles_to_atoms.SmilesToAtoms
      --name SmilesToAtoms
    params:
      params.yaml:
        SmilesToAtoms:
          cell:
          optimizer: UFF
          seed: 1234
          smiles: O
    outs:
    - path: nodes/SmilesToAtoms/atoms.h5
      md5: 18e1daf34a7a2c928ab218e8c24b835b
      size: 27968
    - path: nodes/SmilesToAtoms/molecule.png
      md5: 68c5abd6a9aa9afec2350871948be67a
      size: 2795
  Packmol:
    cmd: zntrack run ipsuite.configuration_generation.packmol.Packmol --name Packmol
    deps:
    - path: nodes/SmilesToAtoms/atoms.h5
      md5: 18e1daf34a7a2c928ab218e8c24b835b
      size: 27968
    - path: nodes/SmilesToAtoms/molecule.png
      md5: 68c5abd6a9aa9afec2350871948be67a
      size: 2795
    params:
      params.yaml:
        Packmol:
          box:
          count:
          - 10
          density: 997
          tolerance: 2.0
    outs:
    - path: nodes/Packmol/atoms.h5
      md5: 963c575495ab9f1e1853d9704baf3543
      size: 27968
    - path: nodes/Packmol/packmol
      md5: 222a03a391988ec4235c4a3f68554653.dir
      size: 2192
      nfiles: 3
  CP2KSinglePoint:
    cmd: zntrack run ipsuite.calculators.cp2k.CP2KSinglePoint --name CP2KSinglePoint
    deps:
    - path: GTH_BASIS_SETS
      md5: 518e733a7344699cf0b4192bb97eb6a3
      size: 119403
    - path: GTH_POTENTIALS
      md5: 3a35b03b26b8ba5cf6c1d849dba11f15
      size: 128982
    - path: dftd3.dat
      md5: 88745bcc951a4bcdccc4d6bcfa78d105
      size: 1959318
    - path: nodes/Packmol/atoms.h5
      md5: 963c575495ab9f1e1853d9704baf3543
      size: 27968
    - path: nodes/Packmol/packmol
      md5: 222a03a391988ec4235c4a3f68554653.dir
      size: 2192
      nfiles: 3
    params:
      cp2k.yaml:
        force_eval:
          method: quickstep
          DFT:
            mgrid:
              cutoff: 1800.0
              rel_cutoff: 120.0
              ngrids: 5
            QS:
              eps_filter_matrix: 0.0
              eps_pgf_orb: 0.0001
            SCF:
              scf_guess: restart
              max_scf: 100
              eps_scf: 1e-06
              OT:
                minimizer: diis
                preconditioner: full_single_inverse
              outer_scf:
                max_scf: 100
                eps_scf: 1e-06
              print:
                restart:
                  each:
                    QS_SCF: 0
            XC:
              xc_functional:
                becke97:
                  scale_c: 1.0
                  scale_x: 1.0
              vdw_potential:
                pair_potential:
                  type: DFTD3
                  parameter_file_name: dftd3.dat
                  reference_functional: PBE
                  r_cutoff: 16
                potential_type: pair_potential
            print:
              moments:
                _: ON
              hirshfeld:
                _: ON
            charge: 0
            basis_set_file_name: GTH_BASIS_SETS
            potential_file_name: GTH_POTENTIALS
          subsys:
            kind:
              O:
                basis_set: TZVP-GTH-q6
                potential: GTH-PBE-q6
              C:
                basis_set: TZVP-GTH-q4
                potential: GTH-PBE-q4
              H:
                basis_set: TZVP-GTH-q1
                potential: GTH-PBE-q1
    outs:
    - path: nodes/CP2KSinglePoint/atoms.h5
      md5: 94a90501fe62ab5e3afb97448d3f8a4e
      size: 40648
    - path: nodes/CP2KSinglePoint/cp2k
      md5: 034703f9b09b8ba6fe528de4d2027e5a.dir
      size: 178581
      nfiles: 3
  ASEGeoOpt:
    cmd: zntrack run ipsuite.calculators.ase_geoopt.ASEGeoOpt --name ASEGeoOpt
    deps:
    - path: nodes/CP2KSinglePoint/atoms.h5
      md5: 94a90501fe62ab5e3afb97448d3f8a4e
      size: 40648
    - path: nodes/CP2KSinglePoint/cp2k
      md5: 034703f9b09b8ba6fe528de4d2027e5a.dir
      size: 178581
      nfiles: 3
    - path: nodes/Packmol/atoms.h5
      md5: 963c575495ab9f1e1853d9704baf3543
      size: 27968
    - path: nodes/Packmol/packmol
      md5: 222a03a391988ec4235c4a3f68554653.dir
      size: 2192
      nfiles: 3
    params:
      params.yaml:
        ASEGeoOpt:
          data_id: 0
          init_kwargs: {}
          optimizer: BFGS
          repeat:
          - 1
          - 1
          - 1
          run_kwargs:
            fmax: 0.1
    outs:
    - path: nodes/ASEGeoOpt/model_outs
      md5: 4e2a2e9d222fb73b44aea840d704a208.dir
      size: 1460526
      nfiles: 7
    - path: nodes/ASEGeoOpt/optim.traj
      md5: ec10e5aa0dfcf459ae634b8e2bf93767
      size: 389001
  ASEMD_1_thermostat:
    cmd: zntrack run ipsuite.calculators.ase_md.LangevinThermostat --name ASEMD_1_thermostat
      --hash-only
    params:
      params.yaml:
        ASEMD_1_thermostat:
          friction: 0.01
          temperature: 300
          time_step: 0.5
      zntrack.json:
        ASEMD_1.thermostat:
          _type: zntrack.Node
          value:
            module: ipsuite.calculators.ase_md
            cls: LangevinThermostat
            name: ASEMD_1_thermostat
            remote:
            rev:
    outs:
    - path: nodes/ASEMD_1_thermostat/hash
      md5: 6c8ce374c7eff47101d93da147b8a8b2
      size: 36
  ASEMD:
    cmd: zntrack run ipsuite.calculators.ase_md.ASEMD --name ASEMD
    deps:
    - path: nodes/ASEGeoOpt/model_outs
      md5: 4e2a2e9d222fb73b44aea840d704a208.dir
      size: 1460526
      nfiles: 7
    - path: nodes/ASEGeoOpt/optim.traj
      md5: ec10e5aa0dfcf459ae634b8e2bf93767
      size: 389001
    - path: nodes/ASEMD_thermostat/hash
      md5: 7777dee660f2019b0460479377f60a67
      size: 36
    - path: nodes/CP2KSinglePoint/atoms.h5
      md5: 94a90501fe62ab5e3afb97448d3f8a4e
      size: 40648
    - path: nodes/CP2KSinglePoint/cp2k
      md5: 034703f9b09b8ba6fe528de4d2027e5a.dir
      size: 178581
      nfiles: 3
    params:
      params.yaml:
        ASEMD:
          data_id: -1
          dump_rate: 1
          init_temperature:
          init_velocity:
          repeat:
          - 1
          - 1
          - 1
          sampling_rate: 1
          steps: 5000
    outs:
    - path: nodes/ASEMD/metrics_dict.csv
      md5: a9eb68ff12ace80368bd0d061c48a3db
      size: 122348
    - path: nodes/ASEMD/model
      md5: 51736a35d7985975af46ff96b0b76bf1.dir
      size: 52259925
      nfiles: 7
    - path: nodes/ASEMD/steps_before_stopping.json
      md5: 6bb61e3b7bce0931da574d19d1d82c88
      size: 2
    - path: nodes/ASEMD/trajectory.h5
      md5: a9fc4bcdb25663e92473535dbebe9600
      size: 14837984
    - path: nodes/ASEMD/velocity_cache.json
      md5: 8ed7a61b8111212bf49c4bd987b84259
      size: 1182
  ConfigurationSelection:
    cmd: zntrack run ipsuite.configuration_selection.random.RandomSelection --name
      ConfigurationSelection
    deps:
    - path: nodes/ASEMD/metrics_dict.csv
      md5: a9eb68ff12ace80368bd0d061c48a3db
      size: 122348
    - path: nodes/ASEMD/model
      md5: 51736a35d7985975af46ff96b0b76bf1.dir
      size: 52259925
      nfiles: 7
    - path: nodes/ASEMD/steps_before_stopping.json
      md5: 6bb61e3b7bce0931da574d19d1d82c88
      size: 2
    - path: nodes/ASEMD/trajectory.h5
      md5: a9fc4bcdb25663e92473535dbebe9600
      size: 14837984
    - path: nodes/ASEMD/velocity_cache.json
      md5: 8ed7a61b8111212bf49c4bd987b84259
      size: 1182
    params:
      params.yaml:
        ConfigurationSelection:
          n_configurations: 250
          seed: 1234
    outs:
    - path: nodes/ConfigurationSelection/_hash.json
      md5: 27d11527dddd6e9e6a07039c3851dc63
      size: 38
    - path: nodes/ConfigurationSelection/selected_configurations.json
      md5: 4f90751495e11bcfd7d56ba4201619c8
      size: 3474
  ConfigurationSelection_1:
    cmd: zntrack run ipsuite.configuration_selection.random.RandomSelection --name
      ConfigurationSelection_1
    deps:
    - path: nodes/ASEMD/metrics_dict.csv
      md5: a9eb68ff12ace80368bd0d061c48a3db
      size: 122348
    - path: nodes/ASEMD/model
      md5: 51736a35d7985975af46ff96b0b76bf1.dir
      size: 52259925
      nfiles: 7
    - path: nodes/ASEMD/steps_before_stopping.json
      md5: 6bb61e3b7bce0931da574d19d1d82c88
      size: 2
    - path: nodes/ASEMD/trajectory.h5
      md5: a9fc4bcdb25663e92473535dbebe9600
      size: 14837984
    - path: nodes/ASEMD/velocity_cache.json
      md5: 8ed7a61b8111212bf49c4bd987b84259
      size: 1182
    - path: nodes/ConfigurationSelection/_hash.json
      md5: 27d11527dddd6e9e6a07039c3851dc63
      size: 38
    - path: nodes/ConfigurationSelection/selected_configurations.json
      md5: 4f90751495e11bcfd7d56ba4201619c8
      size: 3474
    params:
      params.yaml:
        ConfigurationSelection_1:
          n_configurations: 250
          seed: 1234
    outs:
    - path: nodes/ConfigurationSelection_1/_hash.json
      md5: 767988b3b4b1ab93267f3af6966665c6
      size: 38
    - path: nodes/ConfigurationSelection_1/selected_configurations.json
      md5: d498711c0cf13d6915eec6b340283418
      size: 3469
  ConfigurationSelection_2:
    cmd: zntrack run ipsuite.configuration_selection.random.RandomSelection --name
      ConfigurationSelection_2
    deps:
    - path: nodes/ASEMD/metrics_dict.csv
      md5: a9eb68ff12ace80368bd0d061c48a3db
      size: 122348
    - path: nodes/ASEMD/model
      md5: 51736a35d7985975af46ff96b0b76bf1.dir
      size: 52259925
      nfiles: 7
    - path: nodes/ASEMD/steps_before_stopping.json
      md5: 6bb61e3b7bce0931da574d19d1d82c88
      size: 2
    - path: nodes/ASEMD/trajectory.h5
      md5: a9fc4bcdb25663e92473535dbebe9600
      size: 14837984
    - path: nodes/ASEMD/velocity_cache.json
      md5: 8ed7a61b8111212bf49c4bd987b84259
      size: 1182
    - path: nodes/ConfigurationSelection/_hash.json
      md5: 27d11527dddd6e9e6a07039c3851dc63
      size: 38
    - path: nodes/ConfigurationSelection/selected_configurations.json
      md5: 4f90751495e11bcfd7d56ba4201619c8
      size: 3474
    - path: nodes/ConfigurationSelection_1/_hash.json
      md5: bbfe5c0ac8fffa1de8c1e14100e41158
      size: 38
    - path: nodes/ConfigurationSelection_1/selected_configurations.json
      md5: d5edf7f11bffef24a0a64c9925f050d6
      size: 713
    params:
      params.yaml:
        ConfigurationSelection_2:
          n_configurations: 250
          seed: 1234
    outs:
    - path: nodes/ConfigurationSelection_2/_hash.json
      md5: f2fecab57415427d7ca32d2b5d15a511
      size: 38
    - path: nodes/ConfigurationSelection_2/selected_configurations.json
      md5: b5c80a5c8d34fd2401f1031d1e3b2d0e
      size: 3470
  MLModel:
    cmd: zntrack run ipsuite.models.gap.GAP --name MLModel
    deps:
    - path: nodes/ConfigurationSelection_1/_hash.json
      md5: 767988b3b4b1ab93267f3af6966665c6
      size: 38
    - path: nodes/ConfigurationSelection_1/selected_configurations.json
      md5: d498711c0cf13d6915eec6b340283418
      size: 3469
    params:
      params.yaml:
        MLModel:
          distance_nb:
            _type: distanceNb_dataclass
            value:
              add_species: true
              covariance_type: ard_se
              cutoff: 6.0
              delta: 0.1
              n_sparse: 50
              order: 2
              sparse_method: CUR_POINTS
              theta_uniform: 1.0
          gap:
            _type: GapParameter_dataclass
            value:
              default_sigma: '{0.0001 0.01 0.01 0.01}'
              e0_method: average
              sparse_jitter: 1e-10
          soap:
            _type: soap_dataclass
            value:
              add_species: true
              covariance_type: dot_product
              cutoff: 3
              cutoff_transition_width: 0.5
              delta: 1.0
              l_max: 5
              n_max: 5
              n_sparse: 50
              sigma: 0.5
              sparse_method: CUR_POINTS
              zeta: 4.0
          use_energy: true
          use_forces: true
          use_stresses: false
    outs:
    - path: nodes/MLModel/gap.input
      md5: 3d60d74e278913cfa85cf6077af05b78
      size: 726
    - path: nodes/MLModel/model
      md5: a2a8937d756da3d21762fee3e6201b7b.dir
      size: 2352720
      nfiles: 7
    - path: nodes/MLModel/train_atoms.extxyz
      md5: 0e0ae9c24be7522b12c073f6aa7da3a9
      size: 1269314
  ASEMD_1:
    cmd: zntrack run ipsuite.calculators.ase_md.ASEMD --name ASEMD_1
    deps:
    - path: nodes/ASEGeoOpt/model_outs
      md5: 4e2a2e9d222fb73b44aea840d704a208.dir
      size: 1460526
      nfiles: 7
    - path: nodes/ASEGeoOpt/optim.traj
      md5: ec10e5aa0dfcf459ae634b8e2bf93767
      size: 389001
    - path: nodes/ASEMD_1_thermostat/hash
      md5: 6c8ce374c7eff47101d93da147b8a8b2
      size: 36
    - path: nodes/MLModel/gap.input
      md5: 3d60d74e278913cfa85cf6077af05b78
      size: 726
    - path: nodes/MLModel/model
      md5: a2a8937d756da3d21762fee3e6201b7b.dir
      size: 2352720
      nfiles: 7
    - path: nodes/MLModel/train_atoms.extxyz
      md5: 0e0ae9c24be7522b12c073f6aa7da3a9
      size: 1269314
    params:
      params.yaml:
        ASEMD_1:
          data_id: -1
          dump_rate: 1
          init_temperature:
          init_velocity:
          repeat:
          - 1
          - 1
          - 1
          sampling_rate: 1
          steps: 5000
    outs:
    - path: nodes/ASEMD_1/metrics_dict.csv
      md5: a6e59d29a513777392cf54fc9b48bbb8
      size: 122296
    - path: nodes/ASEMD_1/model
      md5: 64586897446153f477c052dd0e2579ad.dir
      size: 11
      nfiles: 1
    - path: nodes/ASEMD_1/steps_before_stopping.json
      md5: 6bb61e3b7bce0931da574d19d1d82c88
      size: 2
    - path: nodes/ASEMD_1/trajectory.h5
      md5: f9a5921fb15c47e4b2bbe689a501edf2
      size: 14362304
    - path: nodes/ASEMD_1/velocity_cache.json
      md5: 75ef7d58058166798b68d173fad710fa
      size: 1182
  Prediction:
    cmd: zntrack run ipsuite.analysis.model.predict.Prediction --name Prediction
    deps:
    - path: nodes/ConfigurationSelection/_hash.json
      md5: 27d11527dddd6e9e6a07039c3851dc63
      size: 38
    - path: nodes/ConfigurationSelection/selected_configurations.json
      md5: 4f90751495e11bcfd7d56ba4201619c8
      size: 3474
    - path: nodes/MLModel/gap.input
      md5: 3d60d74e278913cfa85cf6077af05b78
      size: 726
    - path: nodes/MLModel/model
      md5: a2a8937d756da3d21762fee3e6201b7b.dir
      size: 2352720
      nfiles: 7
    - path: nodes/MLModel/train_atoms.extxyz
      md5: 0e0ae9c24be7522b12c073f6aa7da3a9
      size: 1269314
    outs:
    - path: nodes/Prediction/atoms.h5
      md5: 42cda73ac51f2fc39dd309e7913b7139
      size: 902888
  PredictionMetrics:
    cmd: zntrack run ipsuite.analysis.model.predict.PredictionMetrics --name PredictionMetrics
    deps:
    - path: nodes/Prediction/atoms.h5
      md5: 42cda73ac51f2fc39dd309e7913b7139
      size: 902888
    outs:
    - path: nodes/PredictionMetrics/energy.json
      md5: f5dcaa17a79942a9dfbd1fb87fcb2d2c
      size: 165
    - path: nodes/PredictionMetrics/energy_df.csv
      md5: a89e60c083d457b3b0a8b5064804d488
      size: 9882
    - path: nodes/PredictionMetrics/forces.json
      md5: b9c854655d5a62c6e76fc7551d1c2e35
      size: 164
    - path: nodes/PredictionMetrics/forces_df.csv
      md5: 8eb6c1cdbe19dde178daa39bfef13958
      size: 1163479
    - path: nodes/PredictionMetrics/plots
      md5: 6560242f15b24093ba2af7de38b61413.dir
      size: 241733
      nfiles: 2
    - path: nodes/PredictionMetrics/stress.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/PredictionMetrics/stress_df.csv
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3
